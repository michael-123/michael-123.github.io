<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Ask For KB Articles</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <main>
        <form>
            <input style="width: 75%; height: 3.5em;" id="query-textfield" type="text" value="Where is my admin console."><br>
        </form>
        <table id="result-table">
            <tbody>
            </tbody>
        </table>
    </main>
    <script>
        function loadData() {
            var query = $("#query-textfield").val()
            if(query.length < 5) {
                console.log("Query too short.")
                return
            }

            console.log("Asking for " + query);
            $.ajax({
                url: "http://paessler-topic-modeling.herokuapp.com/articles/" + query,
                type: "GET",
                dataType: "json",
                success: function(data){
                    $("#result-table tr").remove();
                    $.each(data.result, function(index, entry) {
                        $("#result-table").append("<tr><td><a href=\""+entry.url+"\">"+entry.title+"</a></td></tr>");
                    });
                }
            });
        }

        $(document).ready(function() {
            loadData()
            $("#query-textfield").keyup(loadData);
        });
    </script>
</body>
</html>
